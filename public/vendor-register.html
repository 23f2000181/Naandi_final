<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Become a Vendor - Naandi</title>
  <link rel="stylesheet" href="/css/styles.css" />
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <header class="topnav">
    <div class="logo">Naandi</div>
    <nav class="mainnav">
      <a href="/index.html">Home</a>
      <a href="/services.html">Services</a>
      <a href="/vendor-register.html">Vendor</a>
      <a href="/index.html#about">About</a>
    </nav>
    <nav class="rightnav">
      <a href="/signin.html">Sign In</a>
      <a class="pill" href="/register.html">Register</a>
    </nav>
  </header>
  
  <main class="vendor-registration">
    <div class="registration-container">
      <div class="registration-header">
        <h1>Become a Vendor</h1>
        <p class="muted">Join our platform and start offering your services to customers</p>
        <div class="registration-steps">
          <div class="step active">
            <div class="step-number">1</div>
            <div class="step-info">
              <h4>Basic Information</h4>
              <p>Tell us about yourself</p>
            </div>
          </div>
          <div class="step">
            <div class="step-number">2</div>
            <div class="step-info">
              <h4>Business Details</h4>
              <p>Services & portfolio</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="registration-form">
        <div class="form-section">
          <h3>Personal Information</h3>
          <p class="muted">Let's start with your basic details</p>
        </div>
        
        <form id="regForm" class="form">
          <div class="form-group">
            <label>Full Name *</label>
            <input name="name" required placeholder="Enter your full name">
          </div>
          
          <div class="form-group">
            <label>Email Address *</label>
            <input name="email" type="email" required placeholder="your@email.com">
            <small class="muted">This will be used for login and notifications</small>
          </div>
          
          <div class="form-group">
            <label>Mobile Number *</label>
            <input name="mobile" type="tel" required placeholder="+91 98765 43210">
            <small class="muted">For booking notifications and verification</small>
          </div>
          
          <div class="form-group">
            <label>Password *</label>
            <input name="password" type="password" required placeholder="Create a strong password">
            <small class="muted">Minimum 6 characters</small>
          </div>
          
          <div class="form-actions">
            <button class="btn btn-primary" type="submit">
              <span>Continue to Business Details</span>
              <span class="btn-icon">‚Üí</span>
            </button>
          </div>
        </form>
        
        <div id="msg" class="status-message"></div>
      </div>
      
      <div class="registration-benefits">
        <h3>Why Join Naandi?</h3>
        <div class="benefits-grid">
          <div class="benefit-card">
            <div class="benefit-icon">üí∞</div>
            <h4>Earn More</h4>
            <p>Connect with customers and increase your revenue</p>
          </div>
          <div class="benefit-card">
            <div class="benefit-icon">üì±</div>
            <h4>Easy Management</h4>
            <p>Manage bookings and availability from your dashboard</p>
          </div>
          <div class="benefit-card">
            <div class="benefit-icon">‚≠ê</div>
            <h4>Build Reputation</h4>
            <p>Get reviews and build your online presence</p>
          </div>
          <div class="benefit-card">
            <div class="benefit-icon">üöÄ</div>
            <h4>Grow Business</h4>
            <p>Access new customers and expand your reach</p>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <script>
    document.getElementById('regForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const submitBtn = e.target.querySelector('button[type="submit"]');
      const originalText = submitBtn.innerHTML;
      
      // Show loading state
      submitBtn.innerHTML = '<span>Processing...</span>';
      submitBtn.disabled = true;
      
      try {
        const fd = new FormData(e.target);
        const res = await fetch('/api/vendor/register', { 
          method:'POST', 
          headers:{'Content-Type':'application/json'}, 
          body: JSON.stringify(Object.fromEntries(fd))
        });
        const data = await res.json();
        
        if(data.tempId){ 
          window.location.href = `/vendor-business.html?tempId=${data.tempId}`; 
        } else {
          showMessage(data.error || 'Registration failed', 'error');
        }
      } catch (error) {
        showMessage('Network error. Please try again.', 'error');
      } finally {
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }
    });
    
    function showMessage(message, type = 'success') {
      const msgEl = document.getElementById('msg');
      msgEl.textContent = message;
      msgEl.className = `status-message ${type}`;
      msgEl.style.display = 'block';
      
      setTimeout(() => {
        msgEl.style.display = 'none';
      }, 5000);
    }
  </script>
</body>
</html>

